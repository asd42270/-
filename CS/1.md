#### 1. 브라우저에 ‘naver.com’을 입력하면 내부적으로 어떤 일이 일어나는지 설명해주세요
크게 8가지로 설명할 수 있습니다.
##### 1. 브라우저에 해당 url을 입력합니다.
- 당연한 사실
##### 2. 브라우저가 url의 ip주소를 찾기 위해서 캐시에서 dns 기록을 조회합니다.
- DNS(Domain Name System)를 통해 웹사이트의 실제 IP 주소를 숨기고 사용자가 지정한 주소(도메인 주소)를 보여줄 수 있습니다.
  일종의 별명, 전화번호부라고나 할까나
- 하여간 브라우저는 캐시에서 DNS 기록을 찾기 위해 네 개의 캐시를 확인합니다.
1. 브라우저 캐시: 이전에 방분한 웹사이트의 DNS 기록(일정 기간 동안 저장됨)
2. OS 캐시: 내 컴퓨터의 운영체제(OS)에 저장된 DNS 기록을 조회(gethostname)
3. 라우터 캐시: 컴퓨터에도 없으면 라우터에서 확인
4. ISP 캐시: 라우터에도 없으면 ISP에서 확인한다.
##### 3. 캐시에 없다면 ISP의 DNS 서버가 DNS 쿼리로 url을 호스팅하는 서버 IP 주소를 찾습니다.
- 실질직인 url 접근을 위해서는 IP 주소가 필요한데, 이 주소를 찾거나, 찾을 수 없다는 오류 응답을 반환할 때까지 한 DNS 서버에서 다른 DNS 서버로 검색을 반복적으로 계속한다.
이를 **재귀적 질의**라고 한다.
- 봐도 모르겠는 것들: DNS 룩업, 루트 네임 서버에서부터의 절차, 패킷(데이터를 담는 공간?)

##### 4. 브라우저가 해당 서버와 TCP 연결을 시작합니다.
- 브라우저가 IP 주소를 잘 찾으면 이를 IP 주소와 일치하는 서버와 연결하여 정보를 전송한다.
- 여러 가지 인터넷 프로토콜 중에서 HTTP 요청에서는 TCP라는 전송 제어 프로토콜을 사용한다.
  그래서 맨날 TCP 연결, TCP 연결이했는데, 이 TCP 연결은 **3-way handshake**라는과정을 통해서 이뤄진다.
- 3-way handshake: 클라이언트와 서버 간의 연결 요청-> 연결 승인 -> 메시지 교환 후 연결 설정으로 이루어지는 3단계 프로세스
##### 5. 브라우저가 웹서버에 HTTP 요청을 보낸다.
- TCP 연결이 설정이 됐다면? 이제 데이터를 주고 받을 준비가 됐다는 것이다.
- 브라우저는 url의 웹페이지를 요청하는 GET 요청을 보낸다. 떄에 따라서 POST 요청을 보낼 수도 있다.
- 요청 정보에는 브라우저 식별(User-Agent 헤더), 수락할 요청 유형(Accept 헤더) 및 추가 요청을 위해 TCP 연결을 유지하라는 연결 헤더와 같은 추가 정보도 포함된다. 또한 브라우저가 이 도메인에 대해 저장한 쿠키에서 가져온 정보도 전달한다.

##### 6. 서버가 요청을 내리고 응답을 보낸다.
- 서버는 요청을 받았으니 응답을 내려준다.
- 이 때 사용하는 것이 Request handler이다.
- Request handler: 요청, 요청의 헤더 및 쿠키를 읽고 서버의 정보를 업데이트하는 프로그램이다.
- 이후 응답값을 형식에 맞게 작성한다.

##### 7. 서버가 HTTP 응답을 보낸다.
- 상태 코드, 압축 유형, 페이징 캐싱 방법, 쿠키, 개인 정보 등을 포함한다.
- 이거는 6번의 과정을 거칠 때 같이 보내는 것으로 보인다. 응답값을 줄 때 한 번에 준다고 생각함.
- HTTP 상태 코드:
  - 1xx: 정보 메시지, 서버가 요청을 받았으니 클라이언트는 니 할 거 해라.
  - 2xx: 성공!
  - 3xx: 요청 완료를 위해서 추가적인 작업이 필요하다.
  - 4xx: 요청에 오류가 있다.
  - 5xx: 서버 측에 오류가 있다.
- 201, 203 401, 404 등 세부적인 상태 코드들이 더 있다. 요것도 공부할 것에 추가해야겠다.

##### 8. 브라우저가 HTML 컨텐츠를 보여준다.
- 먼저, HTML 골격을 렌더링한다. 이후 태그 확인을 통해 CSS파일, 자바스크립트 파일 등과 같은 웹 페이지의 추가 요소에 대한
  GET 요청을 보낸다. 정적 파일은 브라우저에서 캐싱되므로 다음에 페이지를 방문할 때 다시 안 가져와도 된다.

##### 마치며
- URL을 입력했을 때 각 url에 대한 클라이언트의 요청을 서버가 처리하고 해당 응답값을 바탕으로 보여준다라고만 알고 있었는데,
- 조금 더 세부적으로 DNS를 통해 브라우저가 캐시에서 그에 맞는 IP 주소를 찾고, 이를 TCP 연결 설정을 해준다는
- 그 요청을 보내고 응답을 받기 위한 과정에 대해 몰랐는데, 알게 되어 좋았다.
